<div class="ip-config-section" data-controller="ip-configuration" data-ip-type="<%= ip_type %>">
  <div class="ip-config-header">
    <h3 class="text-xl font-semibold"><%= ip_type %> Configuration</h3>
    <span class="status-indicator pending">
      <span class="status-dot"></span>
      Configuration Required
    </span>
  </div>
  
  <!-- Number of Core Types -->
  <div class="form-group-inline">
    <label class="form-label">Number of Core Types</label>
    <div class="number-input-group">
      <button type="button" 
              data-action="click->ip-configuration#decrementCores">âˆ’</button>
      <input type="number" 
             name="ip_configurations[<%= ip_type %>][num_core_types]"
             value="1" 
             min="1"
             data-ip-configuration-target="numCores"
             data-action="change->ip-configuration#updateCoreCount">
      <button type="button" 
              data-action="click->ip-configuration#incrementCores">+</button>
    </div>
  </div>
  
  <!-- Core Mappings Container -->
  <div data-ip-configuration-target="coreMappings">
    <%= render 'core_mapping', ip_type: ip_type, core_index: 0 %>
  </div>
  
  <!-- Templates for dynamic content -->
  <div data-ip-configuration-target="coreMappingTemplate" style="display: none;">
    <%= render 'core_mapping', ip_type: ip_type, core_index: 999 %>
  </div>

  <!-- Combined Settings Toggle -->
  <div class="collapsible-section" data-section-type="combined">
    <div class="collapsible-header"
         data-section-name="combined">
      <input type="checkbox" 
             name="ip_configurations[<%= ip_type %>][show_combined_settings]"
             class="sr-only"
             data-combined-checkbox="true">
      <span class="toggle-label">Combined Settings</span>
      <svg class="collapsible-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
      </svg>
    </div>
    
    <div class="collapsible-content" data-combined-content>
      <%= render 'combined_settings', ip_type: ip_type %>
    </div>
  </div>
  
</div>
